---
layout: default
---

<body>
  <a href="upgrade_2_3.html">English</a>

  <h1>Atualização tardia - LMDE 2 (Betsy) com Mate para 3 (Cindy) com Cinnamon</h1>

  <p>Para quem ainda está usando o Linux Mint Debian Edition versão 2, que está obsoleto faz tempo, veja aqui instruções pra uma atualização razoavelmente limpa.</p>
  <p>O procedimento abaixo é, na verdade, um apanhado das instruções e comentários <a href="https://community.linuxmint.com/tutorial/view/2419">deste artigo</a> da página do Linux Mint. É só pra poupar o seu tempo de vasculhar tudo pra resolver problemas já resolvidos.</p>
  <blockquote>O procedimento considera que você está usando um usuário com permissões de sudo, mas não o <code>root</code>. É mais seguro do que virar <code>root</code>.</blockquote>

  <ol>
    <li><a href="#tldr">TL;DR</a></li>
    <li><a href="#before">Antes de começar</a></li>
    <li><a href="#backup_snapshot">Primeiros <i>backup</i> e <i>snapshot</i></a></li>
    <li><a href="#switch">Troca do gerenciador de <i>display</i> e do <i>desktop</i> para LightDM e Cinnamon</a>
      <ol>
        <li><a href="#lightdm">Gerenciador de <i>display</i></a></li>
        <li><a href="#cinnamon"><i>Desktop</i></a></li>
      </ol>
    </li>
    <li><a href="#another_backup_snapshot">Mais <i>backup</i> e <i>snapshot</i></a></li>
    <li><a href="#prepare">Preparação</a></li>
    <li><a href="#upgrade">Ação</a></li>
  </ol>

  <h2 id="tldr">TL;DR</h2>

  <p>Instale o LightDM e o Cinnamon, desinstale o MDM e reinicie (o meu computador precisou de um reinício pro LightDM funcionar direito).</p>
  <pre>
    sudo apt install lightdm cinnamon mint-meta-debian-cinnamon
    sudo apt remove --purge mdm mint-mdm-themes*
    sudo dpkg-reconfigure lightdm
    sudo reboot
  </pre>

  <p>Teste até se acostumar com a combinação (e a sua família também, se for o caso), então desinstale os pacotes do Mate que sobraram e instale os que faltam do Cinnamon.</p>
  <pre>
    sudo dpkg -r --force-depends mint-info-debian-mate
    sudo dpkg -r --force-depends mint-user-guide-mate
    sudo apt install mint-info-debian-cinnamon mint-user-guide-cinnamon
  </pre>

  <p>Faça um <i>backup</i> e um <i>snapshot</i>. Faça o <i>backup</i> do seu jeito. Use o <code>timeshift</code> pro <i>snapshot</i>.</p>
  <pre>
    sudo apt install timeshift
    sudo timeshift --create
    ...
    RSYNC Snapshot saved successfully (&lt;Tempo&gt;)
    Tagged snapshot '&lt;Nome&gt;': ondemand
    sudo timeshift --list
    ...
    Num     Name                 Tags  Description
    ------------------------------------------------------------------------------
    &lt;Número&gt;    >  &lt;Nome&gt;  O
  </pre>

  <p>Atualize o LMDE 2 e instale o atualizador pra LMDE 3.</p>
  <pre>
    sudo apt update
    sudo apt upgrade
    sudo apt install mintupgrade
  </pre>

  <p>Configure rolagem ilimitada no seu terminal. No menu "Editar" do terminal, vá para "Preferências do perfil" -> "Rolagem" - "Ilimitada".</p>
  <p>Verifique os requisitos e baixe os pacotes para a atualização.</p>
  <pre>
    # Repita cada passo até ficar 100% satisfeito, fazendo todas as correções que aparecerem
    mintupgrade check
    mintupgrade download
  </pre>

  <p>Atualize o <i>backup</i> e crie mais um <i>snapshot</i>.</p>
  <pre>
    # Aqui também - a parte do backup é com você
    sudo timeshift --create
  </pre>

  <p>Atualize o LMDE!</p>
  <blockquote>Anote os pacotes removidos - você talvez queira alguns de volta no final</blockquote>
  <pre>
    mintupgrade upgrade
  </pre>

  <p>Revise as configurações em geral. Aqui, eu tive que habilitar novamente 'Permitir início de sessão manual' e desabilitar 'Ocultar lista de usuários' no Menu principal - Administração - Janela de início de sessão - Usuários.</p>
  <p>Quando estiver totalmente satisfeito com os resultados, apague os <i>snapshots</i>.</p>
  <pre>
    # Pra escolher snapshots a remover
    sudo timeshift --list
    timeshift --delete  --snapshot '&lt;Name&gt;'
    # Pra remover todos os snapshots
    timeshift --delete-all
  </pre>

  <p>Missão cumprida.</p>

  <h2 id="before">Antes de começar</h2>

  <p>Algumas coisas importantes para ter em mente antes de sair digitando:</p>
  <ul>
    <li>O Linux Mint Debian Edition não é uma distro <i>rolling release</i>. Então, o único jeito indolor de atualizar é instalar tudo do zero. O roteiro e as ferramentas de atualização são um trabalho fenomenal do mantenedor do Mint <a href="https://community.linuxmint.com/user/view/3">Clement Lefebvre</a> pros que não estiverem a fim de apagar a partição de sistema. Mas não é trivial - considere-se avisado.</li>
    <li>O LMDE 3 inclui o gerenciador de <i>display</i> LightDM e o <i>desktop</i> Cinnamon, e eles são requisitos do atualizador. Dá pra mudar depois, mas você vai <b>precisar</b> instalar LightDM e Cinnamon pra atualizar.</li>
    <li>Você vai <b>precisar</b> fazer um <i>backup</i> e um <i>snapshot</i> do sistema. Mesmo se nunca tiver feito antes. Dessa vez, <b>não</b> deixe pra depois.</li>
    <li>Leia e entenda as instruções de ponta a ponta antes de começar a digitar. Melhor evitar surpresas no meio da aventura.</li>
    <li>Está acostumado com a linha de comando? Vai precisar.</li>
  </ul>

  <h2 id="backup_snapshot">Primeiros <i>backup</i> e <i>snapshot</i></h2>

  <p>Você decidiu continuar, então agora o negócio é sério. Vá pegar sua HD externa ou equivalente e faça o <i>backup</i> dos seus arquivos. Depois, instale uma ferramenta bem legal de <i>snapshot</i> chamada <a href="https://teejeetech.in/timeshift/">timeshift</a> e crie um <i>snapshot</i> do sistema. Aí você terá segurança pra começar a mexer com a sua instalação.</p>

  <pre>
    # Os comandos abaixo fazem só o snapshot, não backup. Faça o backup do seu jeito.
    sudo apt install timeshift
    sudo timeshift --create
  </pre>

  <h2 id="switch">Troca do gerenciador de <i>display</i> e do <i>desktop</i> para LightDM e Cinnamon</h2>

  <h3 id="lightdm">Gerenciador de <i>display</i></h3>

  <h3 id="cinnamon"><i>Desktop</i></h3>

  <h2 id="another_backup_snapshot">Mais <i>backup</i> e <i>snapshot</i></h3>

  <h2 id="prepare">Preparação</h2>

  <h2 id="upgrade">Ação</h2>

</body>
