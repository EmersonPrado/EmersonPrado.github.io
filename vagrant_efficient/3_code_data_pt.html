---
layout: default
---

<body>
  <a href="../index_pt.html">Página inicial</a><br>
  <a href="3_code_data.html">English</a>

  <h1>Vagrantfiles eficientes – Parte 3 – Separação de dados e código</h1>

  <p>Na <a href="2_ruby_pt.html">parte 2</a> desta série de artigos, nos livramos de muita repetição de código (e de muito lugar bom pra erros de digitação) usando <i>arrays</i>, <i>hashes</i>, laços e condicionais. Agora, vamos tornar o código mais limpo e a manutenção mais focada, colocando código e dados no lugar de cada um.</p>

  <ol>
    <li><a href="#tldr">TL;DR</a></li>
    <li><a href="#problema">Problema - mexer no código a cada mudança no ambiente</a></li>
    <li><a href="#solucao">Solução - cada macaco no seu galho</a>
      <ol>
        <li><a href="#variaveis">Variáveis versus lógica</a></li>
        <li><a href="#yaml">Yaml</a></li>
      </ol>
    </li>
    <li><a href="#junto">Tudo ao mesmo tempo agora</a>
      <ol>
        <li><a href="#confs">Mais configurações</a></li>
        <li><a href="#arq_dados">Mais arquivos de dados</a></li>
      </ol>
    </li>
    <li><a href="#depois">E depois?</a></li>
  </ol>

  <h2 id="#tldr">TL;DR</h2>
  <h2 id="#problema">Problema - mexer no código a cada mudança no ambiente</h2>

    <p>Seu ambiente vai mudar. Ponto final. Talvez você precise testar uma versão nova de uma aplicação, ou depurar algum problema nela, ou testá-la em outras opções de SO, ou atualizar <i>boxes</i>, etc. Esse é, afinal, um dos principais motivos pra você usar o Vagrant. Na forma corriqueira de uso do Vagrant, cada mudança implica em editar o Vagrantfile. Isto traz algumas dores de cabeça:</p>
    <ul>
      <li>Você pode acabar tendo um Vagrantfile enorme, com tudo dentro. Mudar alguma coisa nele vai ficando cada vez mais difícil.</li>
      <li>Quando você precisa pensar no código, você também vê dados. Quando você edita o código, corre o risco de "esbarrar" nos dados. E vice-versa.</li>
      <li>O reúso de Vagrantfiles se torna trabalhoso - é necessário copiar e colar Vagrantfiles e editar manualmente as diferenças.</li>
      <li>O versionamento fica confuso - pra qualquer mudança, seu sistema de versionamento sempre indicará a mesma alteração: o Vagrantfile.</li>
    </ul>

  <h2 id="#solucao">Solução - cada macaco no seu galho</h2>
  <h3 id="#variaveis">Variáveis versus lógica</h3>
  <h3 id="#yaml">Yaml</h3>
  <h2 id="#junto">Tudo ao mesmo tempo agora</h2>
  <h2 id="#depois">E depois?</h2>
</body>
