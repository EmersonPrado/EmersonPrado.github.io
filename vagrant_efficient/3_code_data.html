---
layout: default
---

<body>
  <a href="3_code_data_pt.html">Português</a>

  <h1>Efficient Vagrantfiles – Part 3 – Code and data separation</h1>

  <p>In the <a href="2_ruby.html">second part</a> of this series, we got rid of lots of repeated code (and open doors for typing mistakes) by using arrays, hashes, loops and conditionals. Now, let's get our code cleaner and make maintenance more focused by getting code and data where each one belongs.</p>

  <ol>
    <li><a href="#tldr">TL;DR</a></li>
    <li><a href="#problem">Problem - messing with code to each environment change</a></li>
    <li><a href="#solution">Solution - each thing where it belongs</a>
      <ol>
        <li><a href="#variables">Variables versus logic</a></li>
        <li><a href="#yaml">Yaml</a></li>
      </ol>
    </li>
    <li><a href="#together">Putting pieces together</a></li>
    <li><a href="#where">Where do we go from here?</a></li>
  </ol>

  <h2 id="#tldr">TL;DR</h2>
  <h2 id="#problem">Problem - messing with code to each environment change</h2>

  <p>Your environment will change. Period. You might have to test an application's new version, or debug something in it, or try it in more OS options, or update boxes, etc. That's one of the main reasons you're using Vagrant in first place. In the common Vagrant use, every change means editing your Vagrantfile. This means trouble because:</p>
  <ul>
    <li>You end up sometimes having a big Vagrantfile with everything in it. Changing things becomes increasingly more difficult.</li>
    <li>When you have to think about code, you see data too. When you edit code, you risk messing data too. And vice-versa.</li>
    <li>Reusing Vagrantfiles becomes tedious - you have to remove all original data from the cloned Vagrantfile.</li>
    <li>Version tracking becomes a mess - no matter what had to change, your versioning system will always show the same change: Vagrantfile.</li>
  </ul>

  <h2 id="#solution">Solution - each thing where it belongs</h2>
  <h3 id="#variables">Variables versus logic</h3>
  <h3 id="#yaml">Yaml</h3>
  <h2 id="#together">Putting pieces together</h2>
  <h2 id="#where">Where do we go from here?</h2>
</body>
